{{> layout/header}}

<div class="container my-4">

    <!-- 검색/필터 바 -->
    <form method="get" action="/view/lawyers" class="row g-2 mb-3">
        <div class="col-md-4">
            <input type="text" name="q" value="{{q}}" class="form-control" placeholder="이름으로 검색">
        </div>
        <div class="col-md-3">
            <input type="text" name="region" value="{{region}}" class="form-control" placeholder="지역으로 검색">
        </div>
        <div class="col-md-3">
            <select name="size" class="form-select">
                <option value="12" {{#size_is_12}}selected{{/size_is_12}}>12개</option>
                <option value="24" {{#size_is_24}}selected{{/size_is_24}}>24개</option>
                <option value="48" {{#size_is_48}}selected{{/size_is_48}}>48개</option>
            </select>
        </div>
        <div class="col-md-12">
            <!-- 전문분야 체크박스 -->
            {{#specialties}}
                <label class="me-2 mb-1">
                    <input type="checkbox" name="specialty" value="{{code}}" {{#isSelected}}checked{{/isSelected}}>
                    {{label}}
                </label>
            {{/specialties}}
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary w-100" type="submit">검색</button>
        </div>
    </form>

    <!-- 카드 리스트 -->
    <div class="row g-3">
        {{#lawyers}}
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title mb-1">{{name}} 변호사</h5>
                        <div class="text-muted mb-2">자격번호: {{certificateNumber}}</div>

                        <div class="small">
                            <strong>전문분야:</strong>
                            {{#specialtyKoreanNames}}
                                <span class="badge text-bg-light border me-1">{{.}}</span>
                            {{/specialtyKoreanNames}}
                            {{^specialtyKoreanNames}}
                                <span class="text-muted">등록된 전문분야 없음</span>
                            {{/specialtyKoreanNames}}
                        </div>

                        {{#region}}
                            <div class="small mt-2"><strong>지역:</strong> {{region}}</div>
                        {{/region}}
                    </div>
                    <div class="card-footer bg-white">
                        <a href="/view/lawyers/{{id}}" class="btn btn-sm btn-outline-primary">프로필 보기</a>
                    </div>
                </div>
            </div>
        {{/lawyers}}

        {{^lawyers}}
            <div class="col-12">
                <div class="alert alert-light border">조건에 맞는 변호사가 없습니다.</div>
            </div>
        {{/lawyers}}
    </div>

    <!-- 페이지네이션 -->
    <nav class="mt-3">
        <ul class="pagination">
            <li class="page-item">
                <a class="page-link" href="/view/lawyers?{{query_no_page}}&page={{prevPage}}">이전</a>
            </li>
            {{#pages}}
                <li class="page-item {{#active}}active{{/active}}">
                    <a class="page-link" href="/view/lawyers?{{query_no_page}}&page={{index}}">{{display}}</a>
                </li>
            {{/pages}}
            <li class="page-item">
                <a class="page-link" href="/view/lawyers?{{query_no_page}}&page={{nextPage}}">다음</a>
            </li>
        </ul>
    </nav>

</div>

{{> layout/footer}}
